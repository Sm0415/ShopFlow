/* ════════════════════════════════════════════════════════════
   ShopFlow — style.css
   ════════════════════════════════════════════════════════════ */

/* ─── Variables ─────────────────────────────────────────── */
:root {
  --bg:        #eef2ff;
  --surf:      #ffffff;
  --surf2:     #f5f7ff;
  --border:    #dde3f5;
  --text:      #111827;
  --muted:     #6b7280;
  --accent:    #4361ee;
  --accent2:   #3451d1;
  --aGlow:     rgba(67,97,238,.18);
  --success:   #10b981;
  --danger:    #ef4444;
  --warn:      #f59e0b;
  --rad:       14px;
  --rad-sm:    9px;
  --ease:      0.2s cubic-bezier(.4,0,.2,1);
  --sh-sm:     0 1px 4px rgba(0,0,0,.07);
  --sh-md:     0 4px 24px rgba(0,0,0,.09);
  --sh-lg:     0 12px 48px rgba(0,0,0,.14);
}
[data-theme="dark"] {
  --bg:        #090f1e;
  --surf:      #111828;
  --surf2:     #18213a;
  --border:    #1f2d47;
  --text:      #f1f5f9;
  --muted:     #94a3b8;
  --accent:    #6282ff;
  --accent2:   #4f6ff5;
  --aGlow:     rgba(98,130,255,.2);
  --sh-sm:     0 1px 4px rgba(0,0,0,.45);
  --sh-md:     0 4px 24px rgba(0,0,0,.45);
  --sh-lg:     0 12px 48px rgba(0,0,0,.55);
}

/* ─── Reset ──────────────────────────────────────────────── */
*,*::before,*::after { box-sizing:border-box; margin:0; padding:0; }
html { scroll-behavior:smooth; }
body {
  font-family:'DM Sans',sans-serif;
  background:var(--bg);
  color:var(--text);
  line-height:1.6;
  min-height:100vh;
  overflow-x:hidden;
  transition:background var(--ease),color var(--ease);
}
h1,h2,h3,h4,h5 { font-family:'Sora',sans-serif; font-weight:700; line-height:1.2; }
button { font-family:'DM Sans',sans-serif; }
input  { font-family:'DM Sans',sans-serif; }

/* ─── Pages ──────────────────────────────────────────────── */
.page { display:none; min-height:100vh; }
.page.active { display:block; }

/* ═══════════════════════════════════════════════════════════
   LOGIN
═══════════════════════════════════════════════════════════ */
#page-login { display:none; min-height:100vh; }
#page-login.active {
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(135deg,#040d20 0%,#0b1a3e 50%,#060e22 100%);
  position:relative; overflow:hidden;
}

.login-scene { position:absolute; inset:0; pointer-events:none; }
.orb {
  position:absolute; border-radius:50%;
  filter:blur(90px); opacity:.28;
  animation:orbFloat 9s ease-in-out infinite;
}
.orb-a { width:440px;height:440px; background:#4361ee; top:-100px;left:-120px; animation-delay:0s; }
.orb-b { width:320px;height:320px; background:#10b981; bottom:-80px;right:-80px; animation-delay:3.5s; }
.orb-c { width:220px;height:220px; background:#7c3aed; top:55%;left:58%; animation-delay:6s; }
@keyframes orbFloat {
  0%,100% { transform:translateY(0) scale(1); }
  50%      { transform:translateY(-28px) scale(1.04); }
}

.login-card {
  position:relative; z-index:2;
  background:rgba(255,255,255,.055);
  border:1px solid rgba(255,255,255,.11);
  backdrop-filter:blur(22px);
  border-radius:22px; padding:52px 44px;
  width:100%; max-width:430px;
  box-shadow:0 24px 64px rgba(0,0,0,.45);
  animation:slideUp .5s cubic-bezier(.4,0,.2,1) both;
}
@keyframes slideUp {
  from { opacity:0; transform:translateY(28px); }
  to   { opacity:1; transform:translateY(0); }
}

.login-brand { text-align:center; margin-bottom:38px; }
.brand-logo  { font-size:3rem; margin-bottom:10px; }
.login-brand h1 { color:#fff; font-size:2.2rem; letter-spacing:-.5px; }
.login-brand p  { color:rgba(255,255,255,.5); font-size:.88rem; margin-top:5px; }

.login-note {
  text-align:center; color:rgba(255,255,255,.36);
  font-size:.78rem; margin-top:22px; line-height:1.5;
}

/* ─── Field ───────────────────────────────────────────────── */
.field { margin-bottom:18px; }
.field label {
  display:block; font-size:.82rem; font-weight:600;
  margin-bottom:7px; color:rgba(255,255,255,.75);
  font-family:'Sora',sans-serif;
}
#page-shop .field label,
#page-checkout .field label { color:var(--text); }

.input-row { position:relative; display:flex; align-items:center; }
.fi {
  position:absolute; left:13px;
  width:17px; height:17px;
  stroke:rgba(255,255,255,.38); pointer-events:none;
}
#page-checkout .fi { stroke:var(--muted); }

.input-row input {
  width:100%; padding:13px 14px 13px 42px;
  background:rgba(255,255,255,.07);
  border:1px solid rgba(255,255,255,.13);
  border-radius:var(--rad-sm);
  color:#fff; font-size:.93rem; outline:none;
  transition:border-color var(--ease), background var(--ease), box-shadow var(--ease);
}
.input-row input::placeholder { color:rgba(255,255,255,.3); }
.input-row input:focus {
  border-color:var(--accent);
  background:rgba(67,97,238,.12);
  box-shadow:0 0 0 3px rgba(67,97,238,.22);
}
.input-row input.err-inp { border-color:var(--danger); }

/* Checkout page inputs (light) */
#page-checkout .input-row input {
  background:var(--surf2); border-color:var(--border);
  color:var(--text);
}
#page-checkout .input-row input::placeholder { color:var(--muted); }
#page-checkout .input-row input:focus {
  border-color:var(--accent);
  background:var(--surf);
  box-shadow:0 0 0 3px var(--aGlow);
}

.field-msg { font-size:.8rem; margin-top:6px; min-height:18px; }
.field-msg.ok  { color:#6ee7b7; }
.field-msg.err { color:#fca5a5; display:flex; align-items:center; gap:5px; }
.field-msg.err i { width:13px; height:13px; }
#page-checkout .field-msg.err { color:var(--danger); }

.req { color:#f87171; }

/* ─── Buttons ────────────────────────────────────────────── */
.btn {
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:12px 22px; border-radius:var(--rad-sm); border:none; cursor:pointer;
  font-family:'Sora',sans-serif; font-weight:600; font-size:.9rem;
  transition:all var(--ease);
}
.btn i { width:16px; height:16px; flex-shrink:0; }
.btn-glow {
  background:var(--accent); color:#fff;
}
.btn-glow:hover {
  background:var(--accent2);
  box-shadow:0 6px 20px var(--aGlow);
  transform:translateY(-1px);
}
.btn-glow:active { transform:translateY(0); }
.w100 { width:100%; }
.btn-sm { padding:7px 13px; font-size:.82rem; }


/* ═══════════════════════════════════════════════════════════
   TOPBAR
═══════════════════════════════════════════════════════════ */
.bar {
  position:sticky; top:0; z-index:100;
  background:var(--surf); border-bottom:1px solid var(--border);
  display:flex; align-items:center; gap:14px;
  padding:0 22px; height:62px;
  box-shadow:var(--sh-sm);
  transition:background var(--ease);
}
.bar-l { display:flex; align-items:center; gap:10px; flex-shrink:0; }
.bar-c { flex:1; max-width:460px; margin:0 auto; }
.bar-r { display:flex; align-items:center; gap:8px; flex-shrink:0; margin-left:auto; }

.logo-mark { font-size:1.5rem; }
.logo-text  { font-family:'Sora',sans-serif; font-weight:700; font-size:1.1rem; color:var(--accent); }

/* Search box */
.sbox { position:relative; display:flex; align-items:center; }
.sbox-icon { position:absolute; left:12px; width:15px; height:15px; stroke:var(--muted); pointer-events:none; }
.sbox input {
  width:100%; padding:9px 34px 9px 36px;
  background:var(--surf2); border:1px solid var(--border);
  border-radius:99px; font-size:.88rem; color:var(--text); outline:none;
  transition:border-color var(--ease), box-shadow var(--ease);
}
.sbox input:focus { border-color:var(--accent); box-shadow:0 0 0 3px var(--aGlow); }
.sbox-clear {
  position:absolute; right:9px; background:none; border:none;
  cursor:pointer; color:var(--muted); display:flex; padding:2px;
}
.sbox-clear i { width:13px; height:13px; }

/* Icon button */
.ibtn {
  background:none; border:none; cursor:pointer;
  padding:8px; border-radius:var(--rad-sm); color:var(--muted);
  display:flex; align-items:center; justify-content:center;
  transition:background var(--ease), color var(--ease);
}
.ibtn:hover { background:var(--surf2); color:var(--text); }
.ibtn i { width:20px; height:20px; }

/* Cart button + badge */
.cart-ibtn { position:relative; }
.cbadge {
  position:absolute; top:3px; right:3px;
  background:var(--accent); color:#fff;
  font-size:.62rem; font-weight:700; font-family:'Sora',sans-serif;
  width:17px; height:17px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
}

/* User chip */
.uchip {
  display:flex; align-items:center; gap:6px;
  background:var(--surf2); border:1px solid var(--border);
  border-radius:99px; padding:5px 12px 5px 8px;
  font-size:.82rem; font-weight:500;
}
.uchip i { width:15px; height:15px; stroke:var(--accent); }


/* ═══════════════════════════════════════════════════════════
   SHOP
═══════════════════════════════════════════════════════════ */
.shop-wrap { display:flex; position:relative; min-height:calc(100vh - 62px); }
.prod-section { flex:1; padding:30px 26px; min-width:0; }

.prod-header { margin-bottom:22px; }
.prod-header h2 { font-size:1.45rem; }
.prod-count { font-size:.84rem; color:var(--muted); }

/* Product grid */
.prod-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:20px;
}

.pcard {
  background:var(--surf); border:1px solid var(--border);
  border-radius:var(--rad); overflow:hidden;
  box-shadow:var(--sh-sm);
  transition:transform var(--ease), box-shadow var(--ease);
  animation:fadeUp .35s ease both;
}
.pcard:hover { transform:translateY(-5px); box-shadow:var(--sh-md); }
@keyframes fadeUp {
  from { opacity:0; transform:translateY(18px); }
  to   { opacity:1; transform:translateY(0); }
}

.pcard-img {
  width:100%; aspect-ratio:1/1; overflow:hidden;
  background:var(--surf2); position:relative;
}
.pcard-img img {
  width:100%; height:100%; object-fit:cover;
  transition:transform .4s ease;
}
.pcard:hover .pcard-img img { transform:scale(1.07); }

.pcard-body { padding:15px; }
.pcard-name {
  font-family:'Sora',sans-serif; font-weight:600; font-size:.92rem;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin-bottom:3px;
}
.pcard-desc {
  font-size:.78rem; color:var(--muted); margin-bottom:10px;
  overflow:hidden; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;
}
.pcard-price {
  font-family:'Sora',sans-serif; font-weight:700; font-size:1.08rem;
  color:var(--accent); margin-bottom:12px;
}
.pcard-ctrl { display:flex; align-items:center; gap:9px; }

/* Qty spinner */
.qty-wrap {
  display:flex; align-items:center;
  border:1px solid var(--border); border-radius:var(--rad-sm); overflow:hidden;
}
.qbtn {
  background:none; border:none; width:28px; height:28px;
  cursor:pointer; color:var(--muted); font-size:1rem;
  display:flex; align-items:center; justify-content:center;
  transition:background var(--ease);
}
.qbtn:hover { background:var(--surf2); color:var(--text); }
.qty-val {
  width:34px; text-align:center; border:none;
  border-left:1px solid var(--border); border-right:1px solid var(--border);
  background:none; color:var(--text);
  font-family:'Sora',sans-serif; font-size:.88rem; font-weight:600;
  height:28px; outline:none;
}

/* Empty state */
.empty-state {
  display:flex; flex-direction:column; align-items:center;
  gap:12px; padding:80px 0; color:var(--muted); text-align:center;
}


/* ═══════════════════════════════════════════════════════════
   CART PANEL
═══════════════════════════════════════════════════════════ */
.cart-panel {
  position:fixed; top:0; right:0; width:350px; height:100vh;
  background:var(--surf); border-left:1px solid var(--border);
  box-shadow:var(--sh-lg);
  display:flex; flex-direction:column;
  z-index:200; transform:translateX(100%);
  transition:transform .3s cubic-bezier(.4,0,.2,1);
}
.cart-panel.open { transform:translateX(0); }

.cart-mask {
  display:none; position:fixed; inset:0;
  background:rgba(0,0,0,.32); z-index:190; backdrop-filter:blur(2px);
}
.cart-mask.on { display:block; }

.cp-head {
  display:flex; align-items:center; justify-content:space-between;
  padding:18px 18px 15px; border-bottom:1px solid var(--border);
}
.cp-head h3 { display:flex; align-items:center; gap:8px; font-size:1rem; }
.cp-head h3 i { width:18px; height:18px; stroke:var(--accent); }

.cp-body { flex:1; overflow-y:auto; padding:14px; display:flex; flex-direction:column; gap:10px; }

.cart-empty {
  flex:1; display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  gap:10px; color:var(--muted); padding:40px 0;
}

/* Cart item */
.citem {
  display:flex; align-items:center; gap:11px;
  background:var(--surf2); border:1px solid var(--border);
  border-radius:var(--rad-sm); padding:11px;
  animation:fadeUp .22s ease both;
}
.citem-img { width:50px; height:50px; object-fit:cover; border-radius:7px; flex-shrink:0; }
.citem-info { flex:1; min-width:0; }
.citem-name  { font-weight:600; font-size:.86rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.citem-sub   { font-size:.78rem; color:var(--muted); margin-top:2px; }
.citem-total { font-family:'Sora',sans-serif; font-weight:700; color:var(--accent); font-size:.9rem; flex-shrink:0; }
.citem-del {
  background:none; border:none; cursor:pointer; color:var(--muted);
  padding:4px; border-radius:6px; display:flex;
  transition:background var(--ease), color var(--ease);
}
.citem-del:hover { background:#fee2e2; color:var(--danger); }
.citem-del i { width:14px; height:14px; }

.cp-foot { padding:14px 18px 22px; border-top:1px solid var(--border); }
.ctotal {
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:13px; font-size:.95rem; font-weight:600;
}
#ctotal-val { font-family:'Sora',sans-serif; font-size:1.2rem; color:var(--accent); }


/* ═══════════════════════════════════════════════════════════
   CHECKOUT
═══════════════════════════════════════════════════════════ */
.co-layout {
  display:grid; grid-template-columns:1fr 1fr;
  gap:24px; padding:32px 28px;
  max-width:1000px; margin:0 auto;
  align-items:start;
}
@media(max-width:800px) { .co-layout { grid-template-columns:1fr; } }

.co-card {
  background:var(--surf); border:1px solid var(--border);
  border-radius:var(--rad); box-shadow:var(--sh-md);
  padding:28px; animation:fadeUp .35s ease both;
}

.co-sec-title {
  display:flex; align-items:center; gap:9px;
  font-size:1.1rem; margin-bottom:24px; color:var(--text);
}
.co-sec-title i { width:18px; height:18px; stroke:var(--accent); }

/* Checkout items */
.co-item {
  display:flex; align-items:center; gap:13px;
  padding:11px 0; border-bottom:1px solid var(--border);
}
.co-item:last-child { border-bottom:none; }
.co-item img { width:48px; height:48px; object-fit:cover; border-radius:8px; flex-shrink:0; }
.co-item-info { flex:1; }
.ci-name { font-weight:600; font-size:.9rem; }
.ci-qty  { font-size:.78rem; color:var(--muted); }
.co-item-price { font-family:'Sora',sans-serif; font-weight:700; color:var(--accent); font-size:.9rem; }

.co-divider { height:1px; background:var(--border); margin:18px 0; }

.co-meta { margin-bottom:24px; }
.meta-r {
  display:flex; justify-content:space-between; align-items:center;
  padding:9px 0; border-bottom:1px dashed var(--border); font-size:.88rem;
}
.meta-r:last-child { border-bottom:none; }
.meta-r > span { display:flex; align-items:center; gap:6px; color:var(--muted); }
.meta-r > span i { width:13px; height:13px; }
.meta-r > strong { font-family:'Sora',sans-serif; font-weight:600; }
.meta-total { font-size:1rem; }
.meta-total strong { color:var(--accent); font-size:1.15rem; }

/* Loading bar */
.lbar { margin-top:14px; height:4px; background:var(--border); border-radius:99px; overflow:hidden; }
.lbar-fill {
  height:100%;
  background:linear-gradient(90deg,var(--accent),var(--success));
  border-radius:99px;
  animation:lPulse 1.4s ease-in-out infinite;
}
@keyframes lPulse {
  0%   { width:0%;  margin-left:0; }
  50%  { width:70%; margin-left:15%; }
  100% { width:0%;  margin-left:100%; }
}

#addr-error {
  margin-top:4px; font-size:.82rem;
  color:var(--danger); display:flex; align-items:center; gap:5px;
}
#addr-error i { width:14px; height:14px; }


/* ═══════════════════════════════════════════════════════════
   THANK YOU PAGE
═══════════════════════════════════════════════════════════ */
#page-thankyou.active {
  display:flex; align-items:center; justify-content:center;
  min-height:100vh; background:var(--bg); position:relative; overflow:hidden;
}

.ty-wrap {
  display:flex; align-items:center; justify-content:center;
  width:100%; padding:40px 20px; position:relative; z-index:1;
}

.ty-card {
  background:var(--surf); border:1px solid var(--border);
  border-radius:22px; box-shadow:var(--sh-lg);
  padding:46px 40px; max-width:500px; width:100%;
  text-align:center; animation:popIn .5s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes popIn {
  from { opacity:0; transform:scale(.82); }
  to   { opacity:1; transform:scale(1); }
}

/* Animated check */
.ty-anim {
  position:relative; width:90px; height:90px;
  margin:0 auto 24px; 
}
.ty-ring {
  width:90px; height:90px; border-radius:50%;
  border:4px solid var(--success); position:absolute; top:0; left:0;
  animation:ringPop .6s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes ringPop {
  from { transform:scale(0); opacity:0; }
  to   { transform:scale(1); opacity:1; }
}
.ty-check {
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  font-size:2.4rem; color:var(--success);
  animation:checkPop .5s .15s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes checkPop {
  from { transform:scale(0) rotate(-20deg); opacity:0; }
  to   { transform:scale(1) rotate(0); opacity:1; }
}

.ty-title { font-size:1.65rem; margin-bottom:8px; }
.ty-title span { color:var(--accent); }
.ty-subtitle { color:var(--muted); font-size:.92rem; margin-bottom:24px; }

/* ETA badge */
.ty-eta {
  display:flex; align-items:center; gap:14px;
  background:linear-gradient(135deg,rgba(67,97,238,.1),rgba(16,185,129,.1));
  border:1px solid rgba(67,97,238,.2);
  border-radius:var(--rad); padding:16px 20px;
  margin-bottom:22px; text-align:left;
}
.eta-icon { font-size:2rem; flex-shrink:0; }
.eta-text { display:flex; flex-direction:column; gap:3px; }
.eta-text strong { font-family:'Sora',sans-serif; font-size:.9rem; }
.eta-time {
  font-family:'Sora',sans-serif; font-size:1.5rem; font-weight:800;
  background:linear-gradient(90deg,var(--accent),var(--success));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  background-clip:text;
}

/* Summary rows */
.ty-summary {
  background:var(--surf2); border:1px solid var(--border);
  border-radius:var(--rad-sm); padding:16px;
  text-align:left; margin-bottom:20px;
  font-size:.86rem;
}
.ty-row {
  display:flex; justify-content:space-between;
  padding:5px 0; border-bottom:1px dashed var(--border);
  color:var(--muted);
}
.ty-row:last-child { border-bottom:none; }
.ty-row strong { color:var(--text); font-weight:600; }
.ty-row.ty-total { font-size:.92rem; font-weight:700; }
.ty-row.ty-total strong { color:var(--accent); font-size:1rem; }

.ty-note {
  display:flex; align-items:center; gap:9px;
  background:rgba(16,185,129,.09); border:1px solid rgba(16,185,129,.2);
  border-radius:var(--rad-sm); padding:12px 16px;
  font-size:.82rem; color:var(--success); margin-bottom:24px; text-align:left;
}
.ty-note i { width:16px; height:16px; flex-shrink:0; }

/* Confetti */
.confetti-wrap {
  position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden;
}
.conf-piece {
  position:absolute; top:-20px; width:10px; height:10px;
  border-radius:2px; animation:confettiFall linear forwards;
}
@keyframes confettiFall {
  to { transform:translateY(110vh) rotate(720deg); opacity:0; }
}

/* ─── Scrollbar ──────────────────────────────────────────── */
::-webkit-scrollbar { width:5px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--border); border-radius:99px; }

/* ─── Responsive ─────────────────────────────────────────── */
@media(max-width:768px) {
  .bar-c { display:none; }
  .prod-grid { grid-template-columns:repeat(auto-fill,minmax(155px,1fr)); gap:13px; }
  .prod-section { padding:18px 14px; }
  .cart-panel { width:100%; }
  .ty-card { padding:32px 22px; }
  .co-layout { padding:20px 14px; gap:16px; }
  .uchip span { display:none; }
  .login-card { padding:38px 26px; }
}
@media(max-width:400px) {
  .prod-grid { grid-template-columns:1fr 1fr; gap:10px; }
  .pcard-body { padding:10px; }
}